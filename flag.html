<html>
<head>
	<!-- <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'> -->
	<link href='https://fonts.googleapis.com/css?family=Lobster' rel='stylesheet' type='text/css'>
	<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
	<style>body { font-family: "Open Sans"; } div { margin: 30px; }</style>
</head>
<body>
	<div id="flag">
	</div>
	<div>
		<script>
		var precWon = [
			{candidate:'Donald Trump', d_tot:526, d_won:280},
			{candidate:'Ted Cruz', d_tot:319, d_won:173},
			{candidate:'Marco Rubio', d_tot:38, d_won:17},
		];

		var height = 400;
		var width = 600;
		var svg = d3.select("#flag").append("svg")
		.attr("height", height).attr("width", width);
		var count = 0;
		var barHeight = height/3;
		var wScale = d3.scale.linear().domain([0, 1]).range([0,600]);

		precWon.forEach(function (c) {
			if (count != barHeight){
				color1 = 'red';
				color2 = '#F4EAD5';
			} else {
				color1 = '#F4EAD5';
				color2 = 'red';
			}
			var percDel = c.d_won / c.d_tot;
			svg.append("rect").attr("x", 0)
				.attr("y", count)
				.attr("height", barHeight/3)
				.attr("width", wScale(percDel))
				.style("fill", color1);
			svg.append("rect").attr("x", wScale(percDel))
				.attr("y", count)
				.attr("height", barHeight/3)
				.attr("width", 600 - wScale(percDel))
				.style("fill", color1)
				.style("opacity", ".2");
			svg.append("rect").attr("x", 0)
				.attr("y", count+barHeight/3)
				.attr("height", barHeight/3)
				.attr("width", wScale(percDel))
				.style("fill", color2);
			svg.append("rect").attr("x", wScale(percDel))
				.attr("y", count+barHeight/3)
				.attr("height", barHeight/3)
				.attr("width", 600 - wScale(percDel))
				.style("fill", color2)
				.style("opacity", ".2");
			svg.append("rect").attr("x", 0)
				.attr("y", count+2*(barHeight/3))
				.attr("height", barHeight/3)
				.attr("width", wScale(percDel))
				.style("fill", color1);
			svg.append("rect").attr("x", wScale(percDel))
				.attr("y", count+2*(barHeight/3))
				.attr("height", barHeight/3)
				.attr("width", 600 - wScale(percDel))
				.style("fill", color1)
				.style("opacity", ".2");
			svg.append("rect").attr("x", wScale(percDel))
				.attr("y", count)
				.attr("height", barHeight)
				.attr("width", 10)
				.style("fill", '#294A74');
			svg.append("text").text(c.candidate)
				.attr("x",(wScale(percDel)+10))
				.attr("y",count+2*(barHeight/3))
				.style("font-family","Lobster")
				.style("font-size",20);
			count+=barHeight; 
		}); 


		svg.append("rect").attr("x", 0)
			.attr("y", 0)
			.attr("height", 200)
			.attr("width", 200)
			.style("fill", "blue");
		for (j = 10; j < 189; j+=21) { 
			for (i = 10; i < 189; i+=21) { 
	    		svg.append("path")
	    		.attr("d","M 10,50 L 25,0 L 40,50 L 0,20 L 50,20 Z")
	    		.attr("transform", "translate(" + i + "," + j + "), scale(.28,.28)" )
	    		.style("fill","white");
			}
		}
		</script>
	</div>

	
</body>
</html>
